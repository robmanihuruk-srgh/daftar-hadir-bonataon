<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Absensi Event Bonataon 2026 - MANIHURUK</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #7209b7;
            --success: #4cc9f0;
            --warning: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
        }
        
        body { 
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        /* ... (CSS lainnya tetap sama, tidak perlu diubah) ... */
        
        .logo-tugu-manihuruk {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 13px;
        }
    </style>
</head>
<body class="min-h-screen text-gray-800">
    <!-- Loading Screen dengan Logo -->
    <div id="loading" class="absolute inset-0 z-[9999] bg-white flex flex-col justify-center items-center">
        <div class="logo-container mb-6" style="width: 100px; height: 100px;">
            <img src="data:image/png;base64,[BASE64_LOGO_HERE]" alt="Logo Tugu Raja Manihuruk" class="logo-tugu-manihuruk">
        </div>
        <div class="text-2xl font-bold mb-2" style="background: linear-gradient(135deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">MANIHURUK</div>
        <div class="text-gray-500 font-medium">Memuat sistem absensi...</div>
        <div class="mt-6 w-48 h-1 bg-gray-200 rounded-full overflow-hidden">
            <div class="h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full animate-pulse" style="width: 70%;"></div>
        </div>
    </div>

    <!-- Header dengan Logo -->
    <header class="gradient-header text-white p-6 pb-20 shadow-lg relative overflow-hidden">
        <!-- Animated background elements -->
        <div class="absolute -top-20 -right-20 w-64 h-64 rounded-full bg-white/10 blur-3xl"></div>
        <div class="absolute -bottom-20 -left-20 w-64 h-64 rounded-full bg-purple-500/10 blur-3xl"></div>
        
        <div class="flex justify-between items-start relative z-10">
            <div class="flex items-center gap-4">
                <div class="logo-container floating-element">
                    <img src="data:image/png;base64,[BASE64_LOGO_HERE]" alt="Logo Tugu Raja Manihuruk" class="logo-tugu-manihuruk">
                </div>
                <div>
                    <h1 class="text-3xl font-extrabold tracking-tight title-text">BONATAON 2026</h1>
                    <p class="text-blue-100 text-sm font-medium tracking-wider uppercase opacity-90 flex items-center gap-2">
                        <i class="fas fa-map-marker-alt"></i> MANIHURUK
                    </p>
                </div>
            </div>
            <div class="text-right">
                <div id="liveClock" class="text-2xl font-mono font-bold bg-white/10 backdrop-blur-sm px-4 py-2 rounded-xl">00:00:00</div>
                <div id="liveDate" class="text-xs text-blue-200 uppercase font-semibold mt-2 flex items-center justify-end gap-1">
                    <i class="fas fa-calendar-alt"></i> <span>...</span>
                </div>
            </div>
        </div>
        
        <!-- Stats Section -->
        <div class="flex gap-4 mt-8 overflow-x-auto pb-2 custom-scrollbar">
            <div class="stat-card flex-1 min-w-[100px]">
                <div class="text-3xl font-bold" id="statRegistered">0</div>
                <div class="text-xs uppercase font-bold text-blue-100 mt-1 flex items-center justify-center gap-1">
                    <i class="fas fa-users"></i> Jemaat
                </div>
            </div>
            <div class="stat-card flex-1 min-w-[100px]">
                <div class="text-3xl font-bold text-green-300" id="statPresent">0</div>
                <div class="text-xs uppercase font-bold text-blue-100 mt-1 flex items-center justify-center gap-1">
                    <i class="fas fa-user-check"></i> Hadir
                </div>
            </div>
            <div class="stat-card flex-1 min-w-[100px]">
                <div class="text-3xl font-bold text-yellow-300" id="statGifts">0</div>
                <div class="text-xs uppercase font-bold text-blue-100 mt-1 flex items-center justify-center gap-1">
                    <i class="fas fa-gift"></i> Hadiah
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="flex px-4 -mt-12 relative z-20 gap-3 overflow-x-auto pb-4 custom-scrollbar">
        <!-- ... (Navigasi tetap sama) ... -->
    </nav>

    <!-- Main Content -->
    <main class="flex-1 p-6 overflow-y-auto bg-gradient-to-b from-gray-50 to-white pb-24">
        <div id="content-area"></div>
    </main>
    
    <!-- Footer -->
    <footer class="py-4 px-6 border-t border-gray-100 text-center text-gray-500 text-sm bg-white">
        <div class="flex justify-between items-center">
            <div class="flex items-center gap-2">
                <img src="data:image/png;base64,[BASE64_LOGO_HERE]" alt="Logo" class="w-6 h-6 object-contain">
                <span>MANIHURUK 2026</span>
            </div>
            <div class="flex items-center gap-2">
                <i class="fas fa-heart text-red-500"></i>
                <span>Bonataon Penuh Sukacita</span>
            </div>
        </div>
    </footer>

    <!-- Admin Modal dengan Logo -->
    <div id="adminModal" class="fixed inset-0 z-[9000] flex items-center justify-center hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closeModal('adminModal')"></div>
        <div class="card max-w-sm w-full mx-4 relative z-10 modal p-8">
            <button onclick="closeModal('adminModal')" class="absolute top-4 right-4 w-10 h-10 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="mb-6 text-center">
                <div class="logo-container mx-auto mb-4" style="width: 80px; height: 80px;">
                    <img src="data:image/png;base64,[BASE64_LOGO_HERE]" alt="Logo Tugu Raja Manihuruk" class="logo-tugu-manihuruk">
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">Panel Admin</h3>
                <p class="text-sm text-gray-500">Masukkan password untuk akses fitur admin</p>
            </div>
            
            <!-- ... (Form admin tetap sama) ... -->
        </div>
    </div>

    <!-- ... (Modal lainnya dengan logo tetap sama) ... -->

    <script>
        // Kode untuk mengonversi logo ke base64 (opsional)
        // Anda bisa menggunakan tool online untuk konversi PNG ke base64
        // https://www.base64-image.de/
        
        // Atau tambahkan skrip ini jika ingin mengupload logo langsung
        function convertLogoToBase64() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            
            input.onchange = function(event) {
                const file = event.target.files[0];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    // Simpan base64 ke localStorage atau tampilkan di console
                    localStorage.setItem('manihuruk_logo', e.target.result);
                    console.log('Logo base64:', e.target.result.substring(0, 100) + '...');
                    
                    // Update semua gambar logo
                    document.querySelectorAll('.logo-tugu-manihuruk').forEach(img => {
                        img.src = e.target.result;
                    });
                    
                    showToast('Logo berhasil diunggah!', 'success');
                };
                
                reader.readAsDataURL(file);
            };
            
            input.click();
        }
        
        // Fungsi untuk menggunakan logo dari localStorage
        function loadLogoFromStorage() {
            const savedLogo = localStorage.getItem('manihuruk_logo');
            if (savedLogo) {
                document.querySelectorAll('.logo-tugu-manihuruk').forEach(img => {
                    img.src = savedLogo;
                });
            }
        }
        
        // Panggil fungsi ini saat halaman dimuat
        window.addEventListener('DOMContentLoaded', function() {
            loadLogoFromStorage();
            
            // Tambahkan tombol upload logo di mode admin
            if (state.isAdmin) {
                const adminSection = document.querySelector('#content-area');
                if (adminSection) {
                    const uploadBtn = document.createElement('button');
                    uploadBtn.className = 'btn-secondary w-full mt-4 flex items-center justify-center gap-2';
                    uploadBtn.innerHTML = '<i class="fas fa-image"></i> Upload Logo Baru';
                    uploadBtn.onclick = convertLogoToBase64;
                    
                    // Tambahkan ke bagian admin jika ada
                    const adminCard = document.querySelector('.card.p-6');
                    if (adminCard) {
                        adminCard.appendChild(uploadBtn);
                    }
                }
            }
        });
        
        // ... (Kode JavaScript lainnya tetap sama) ...
    </script>
</body>
</html>
